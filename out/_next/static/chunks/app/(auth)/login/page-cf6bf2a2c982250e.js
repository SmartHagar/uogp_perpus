(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[665],{7541:function(e,t,a){Promise.resolve().then(a.bind(a,9883))},6304:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"RouterContext",{enumerable:!0,get:function(){return n}});let r=a(1024),s=r._(a(2265)),n=s.default.createContext(null)},9883:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return page}});var r=a(7437),s=a(5967),n=a(4033),l=a(2265),i=a(1865),o=a(1490),c=a(5782),d=a(4606),input_InputTextPassword=e=>{let{label:t,register:a,required:s,name:n,minLength:i,maxLength:o,errors:c,valueAsNumber:u,type:m="text",readOnly:h,placeholder:x,autoComplete:p="on",addClass:f,value:b}=e,[g,k]=(0,l.useState)(!1);return(0,r.jsxs)("div",{className:f,children:[(0,r.jsx)("label",{htmlFor:n,className:"text-sm font-medium text-gray-700 tracking-wide",children:t}),s&&(0,r.jsx)("span",{className:"ml-1 text-red-600",children:"*"}),(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsx)("input",{className:"w-full text-base px-4 py-2 border  border-gray-300 rounded-lg focus:outline-none focus:border-secondary bg-white",type:"password"===m?g?"text":"password":m,id:n,readOnly:h,placeholder:x,autoComplete:p,...a(n,{required:s,minLength:i,maxLength:o,valueAsNumber:u}),value:b}),"password"===m&&(0,r.jsx)("div",{className:"absolute right-2 top-0 flex items-center h-full cursor-pointer text-secondary",onClick:()=>{k(!g)},children:g?(0,r.jsx)(d.rCC,{size:20}):(0,r.jsx)(d.I$m,{size:20})})]}),(null==c?void 0:c.type)==="required"&&(0,r.jsxs)("p",{className:"text-red-500 font-inter italic text-sm",children:[t," tidak boleh kosong"]}),(null==c?void 0:c.type)==="minLength"&&(0,r.jsxs)("p",{className:"text-red-500 font-inter italic text-sm",children:[t," tidak boleh kurang dari ",i," karakter"]}),(null==c?void 0:c.type)==="maxLength"&&(0,r.jsxs)("p",{className:"text-red-500 font-inter italic text-sm",children:[t," tidak boleh lebih dari ",o," karakter"]}),(null==c?void 0:c.type)==="pattern"&&(0,r.jsxs)("p",{className:"text-red-500 font-inter italic text-sm",children:[t," hanya boleh angka."]})]})},login_FormLogin=e=>{let{register:t,errors:a,control:s,watch:n,setValue:l}=e;return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(c.Z,{label:"Email",name:"email",register:t,required:!0,minLength:2,errors:a.email,addClass:"col-span-4",type:"email"}),(0,r.jsx)(input_InputTextPassword,{label:"Password",name:"password",register:t,required:!0,minLength:3,errors:a.password,addClass:"w-[100%] mt-2",type:"password"})]})},u=a(5991),m=a(8528),h=a(1396),x=a.n(h),page=e=>{let{setLogin:t,cekToken:a}=(0,s.Z)(),c=(0,n.useRouter)(),[d,h]=(0,l.useState)(""),[p,f]=(0,l.useState)(!1),fetchAuth=async()=>{let e=o.Z.get("token");if(e){let e=await a();if(console.log({cekAuth:e}),!(null==e?void 0:e.error)){var t,r,s;let a=null==e?void 0:null===(s=e.data)||void 0===s?void 0:null===(r=s.data)||void 0===r?void 0:null===(t=r.user)||void 0===t?void 0:t.role;c.push("/".concat(a,"/dashboard"))}}f(!1)};(0,l.useEffect)(()=>{fetchAuth()},[]);let{register:b,setValue:g,control:k,watch:v,handleSubmit:j,formState:{errors:y}}=(0,i.cI)(),onSubmit=async e=>{f(!0),h("");let a=await t(e);if(null==a?void 0:a.error){var r;h(null==a?void 0:null===(r=a.error)||void 0===r?void 0:r.pesan)}else{let{data:e}=a;o.Z.set("token",e.token),o.Z.set("role",e.role),c.push("".concat(e.role,"/dashboard"))}setTimeout(()=>{f(!1)},1e3)};return(0,r.jsx)("div",{className:"hero min-h-screen bg-base-content text-base-100",children:(0,r.jsxs)("div",{className:"hero-content flex-col lg:flex-row-reverse",children:[(0,r.jsxs)("div",{className:"text-center lg:text-left",children:[(0,r.jsx)("h1",{className:"text-5xl font-bold",children:"Login Sekarang!"}),(0,r.jsxs)("p",{className:"py-6",children:["Silahkan melakukan login untuk melanjutkan ke halaman admin, atau anda bisa kembali ke"," ",(0,r.jsx)(x(),{className:"underline",href:"/",children:"Halaman Utama"})]})]}),(0,r.jsxs)("div",{className:"card shrink-0 w-full max-w-sm shadow-2xl bg-neutral-content",children:[d&&(0,r.jsx)("div",{className:"text-error p-2 text-center",children:d}),(0,r.jsxs)("form",{onSubmit:j(onSubmit),className:"card-body",children:[(0,r.jsx)(login_FormLogin,{register:b,errors:y,control:k,watch:v,setValue:g}),(0,r.jsx)("div",{className:"mt-4",children:p?(0,r.jsx)(u.Z,{}):(0,r.jsx)(m.Z,{onClick:()=>null,addClass:"btn-primary",children:"Login"})})]})]})]})})}},8528:function(e,t,a){"use strict";var r=a(7437);a(2265),t.Z=e=>{let{onClick:t,addClass:a,children:s}=e;return(0,r.jsx)("button",{onClick:t,className:"btn btn-active ".concat(a),children:s})}},5782:function(e,t,a){"use strict";var r=a(7437);a(2265),t.Z=e=>{let{label:t,register:a,required:s,name:n,minLength:l,maxLength:i,errors:o,valueAsNumber:c,type:d="text",readOnly:u,placeholder:m,autoComplete:h="on",addClass:x,value:p}=e;return(0,r.jsxs)("div",{className:x,children:[(0,r.jsx)("label",{htmlFor:n,className:"text-sm font-medium text-gray-700 tracking-wide",children:t}),s&&(0,r.jsx)("span",{className:"ml-1 text-red-600",children:"*"}),(0,r.jsx)("div",{className:"relative",children:(0,r.jsx)("input",{className:"w-full text-base px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:border-secondary bg-white",type:d,id:n,readOnly:u,placeholder:m,autoComplete:h,...a(n,{required:s,minLength:l,maxLength:i,valueAsNumber:c}),value:p})}),(null==o?void 0:o.type)==="required"&&(0,r.jsxs)("p",{className:"text-red-500 font-inter italic text-sm",children:[t," tidak boleh kosong"]}),(null==o?void 0:o.type)==="minLength"&&(0,r.jsxs)("p",{className:"text-red-500 font-inter italic text-sm",children:[t," tidak boleh kurang dari ",l," karakter"]}),(null==o?void 0:o.type)==="maxLength"&&(0,r.jsxs)("p",{className:"text-red-500 font-inter italic text-sm",children:[t," tidak boleh lebih dari ",i," karakter"]}),(null==o?void 0:o.type)==="pattern"&&(0,r.jsxs)("p",{className:"text-red-500 font-inter italic text-sm",children:[t," hanya boleh angka."]})]})}},5991:function(e,t,a){"use strict";var r=a(7437);a(2265),t.Z=e=>(0,r.jsx)("span",{className:"loading loading-spinner loading-lg"})},8875:function(e,t,a){"use strict";a.d(t,{I8:function(){return n},Sj:function(){return l},_n:function(){return s},hi:function(){return i}});var r=a(2173);let s="https://perpus.thina.my.id",n=r.Z.create({baseURL:"".concat(s,"/auth")}),l=r.Z.create({baseURL:"".concat(s,"/crud")}),i=r.Z.create({baseURL:"".concat(s,"/api")});r.Z.create({baseURL:"".concat(s,"/storage")})},5967:function(e,t,a){"use strict";var r=a(4660),s=a(4810),n=a(8875),l=a(1490);let i=(0,r.Ue)((0,s.mW)((e,t)=>({setToken:async()=>{let e=l.Z.get("token");return e},setLogin:async e=>{try{let t=await (0,n.I8)({method:"post",url:"/login",data:e});return{status:"success",data:t.data}}catch(e){return{status:"error",error:e.response.data}}},cekToken:async()=>{let e=await t().setToken();try{let t=await (0,n.I8)({method:"post",url:"/cek-token",headers:{Authorization:"Bearer ".concat(e)}});return{status:"success",data:t.data}}catch(e){return{status:"error",error:e.response.data}}}})));t.Z=i},4033:function(e,t,a){e.exports=a(94)}},function(e){e.O(0,[447,580,166,396,677,971,472,744],function(){return e(e.s=7541)}),_N_E=e.O()}]);