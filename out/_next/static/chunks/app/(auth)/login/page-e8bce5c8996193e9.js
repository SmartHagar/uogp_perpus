(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4665],{3830:function(e,t,r){Promise.resolve().then(r.bind(r,9883))},6304:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"RouterContext",{enumerable:!0,get:function(){return s}});let n=r(1024),a=n._(r(2265)),s=a.default.createContext(null)},9883:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return page}});var n=r(7437),a=r(5967),s=r(4033),i=r(2265),o=r(1865),l=r(1490),c=r(5782),d=r(4606),input_InputTextPassword=e=>{let{label:t,register:r,required:a,name:s,minLength:o,maxLength:l,errors:c,valueAsNumber:u,type:m="text",readOnly:p,placeholder:h,autoComplete:x="on",addClass:f,value:g}=e,[b,v]=(0,i.useState)(!1);return(0,n.jsxs)("div",{className:f,children:[(0,n.jsx)("label",{htmlFor:s,className:"text-sm font-medium text-gray-700 tracking-wide",children:t}),a&&(0,n.jsx)("span",{className:"ml-1 text-red-600",children:"*"}),(0,n.jsxs)("div",{className:"relative",children:[(0,n.jsx)("input",{className:"w-full text-base px-4 py-2 border  border-gray-300 rounded-lg focus:outline-none focus:border-secondary bg-white",type:"password"===m?b?"text":"password":m,id:s,readOnly:p,placeholder:h,autoComplete:x,...r(s,{required:a,minLength:o,maxLength:l,valueAsNumber:u}),value:g}),"password"===m&&(0,n.jsx)("div",{className:"absolute right-2 top-0 flex items-center h-full cursor-pointer text-secondary",onClick:()=>{v(!b)},children:b?(0,n.jsx)(d.rCC,{size:20}):(0,n.jsx)(d.I$m,{size:20})})]}),(null==c?void 0:c.type)==="required"&&(0,n.jsxs)("p",{className:"text-red-500 font-inter italic text-sm",children:[t," tidak boleh kosong"]}),(null==c?void 0:c.type)==="minLength"&&(0,n.jsxs)("p",{className:"text-red-500 font-inter italic text-sm",children:[t," tidak boleh kurang dari ",o," karakter"]}),(null==c?void 0:c.type)==="maxLength"&&(0,n.jsxs)("p",{className:"text-red-500 font-inter italic text-sm",children:[t," tidak boleh lebih dari ",l," karakter"]}),(null==c?void 0:c.type)==="pattern"&&(0,n.jsxs)("p",{className:"text-red-500 font-inter italic text-sm",children:[t," hanya boleh angka."]})]})},login_FormLogin=e=>{let{register:t,errors:r,control:a,watch:s,setValue:i}=e;return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(c.Z,{label:"Email",name:"email",register:t,required:!0,minLength:2,errors:r.email,addClass:"col-span-4",type:"email"}),(0,n.jsx)(input_InputTextPassword,{label:"Password",name:"password",register:t,required:!0,minLength:3,errors:r.password,addClass:"w-[100%] mt-2",type:"password"})]})},u=r(5991),m=r(8528),p=r(1396),h=r.n(p),page=e=>{let{setLogin:t,cekToken:r}=(0,a.Z)(),c=(0,s.useRouter)(),[d,p]=(0,i.useState)(""),[x,f]=(0,i.useState)(!1),fetchAuth=async()=>{let e=l.Z.get("token");if(e){let e=await r();if(console.log({cekAuth:e}),!(null==e?void 0:e.error)){var t,n,a;let r=null==e?void 0:null===(a=e.data)||void 0===a?void 0:null===(n=a.data)||void 0===n?void 0:null===(t=n.user)||void 0===t?void 0:t.role;c.push("/".concat(r,"/dashboard"))}}f(!1)};(0,i.useEffect)(()=>{fetchAuth()},[]);let{register:g,setValue:b,control:v,watch:k,handleSubmit:j,formState:{errors:y}}=(0,o.cI)(),onSubmit=async e=>{f(!0),p("");let r=await t(e);if(null==r?void 0:r.error){var n;p(null==r?void 0:null===(n=r.error)||void 0===n?void 0:n.pesan)}else{let{data:e}=r;l.Z.set("token",e.token),l.Z.set("role",e.role),c.push("".concat(e.role,"/dashboard"))}setTimeout(()=>{f(!1)},1e3)};return(0,n.jsx)("div",{className:"hero min-h-screen bg-bg-perpus text-base-100",children:(0,n.jsxs)("div",{className:"hero-content flex-col lg:flex-row-reverse bg-white/[0.4] backdrop-blur-sm rounded-lg",children:[(0,n.jsxs)("div",{className:"text-center lg:text-left",children:[(0,n.jsx)("h1",{className:"text-5xl font-bold",children:"Login Sekarang!"}),(0,n.jsxs)("p",{className:"py-6 text-black",children:["Silahkan melakukan login untuk melanjutkan ke halaman admin, atau anda bisa kembali ke"," ",(0,n.jsx)(h(),{className:"underline",href:"/",children:"Halaman Utama"})]})]}),(0,n.jsxs)("div",{className:"card shrink-0 w-full max-w-sm shadow-2xl bg-neutral-content",children:[d&&(0,n.jsx)("div",{className:"text-error p-2 text-center",children:d}),(0,n.jsxs)("form",{onSubmit:j(onSubmit),className:"card-body",children:[(0,n.jsx)(login_FormLogin,{register:g,errors:y,control:v,watch:k,setValue:b}),(0,n.jsx)("div",{className:"mt-4",children:x?(0,n.jsx)(u.Z,{}):(0,n.jsx)(m.Z,{onClick:()=>null,addClass:"btn-primary",children:"Login"})})]})]})]})})}},8528:function(e,t,r){"use strict";var n=r(7437);r(2265),t.Z=e=>{let{onClick:t,addClass:r,children:a,type:s}=e;return(0,n.jsx)("button",{onClick:t,type:s,className:"btn btn-active ".concat(r),children:a})}},5782:function(e,t,r){"use strict";var n=r(7437);r(2265),t.Z=e=>{let{label:t,register:r,required:a,name:s,minLength:i,maxLength:o,errors:l,valueAsNumber:c,type:d="text",readOnly:u,placeholder:m,autoComplete:p="on",addClass:h,value:x}=e;return(0,n.jsxs)("div",{className:h,children:[(0,n.jsx)("label",{htmlFor:s,className:"text-sm font-medium text-gray-700 tracking-wide",children:t}),a&&(0,n.jsx)("span",{className:"ml-1 text-red-600",children:"*"}),(0,n.jsx)("div",{className:"relative",children:(0,n.jsx)("input",{className:"w-full text-base px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:border-secondary bg-white",type:d,id:s,readOnly:u,placeholder:m,autoComplete:p,...r(s,{required:a,minLength:i,maxLength:o,valueAsNumber:c}),value:x})}),(null==l?void 0:l.type)==="required"&&(0,n.jsxs)("p",{className:"text-red-500 font-inter italic text-sm",children:[t," tidak boleh kosong"]}),(null==l?void 0:l.type)==="minLength"&&(0,n.jsxs)("p",{className:"text-red-500 font-inter italic text-sm",children:[t," tidak boleh kurang dari ",i," karakter"]}),(null==l?void 0:l.type)==="maxLength"&&(0,n.jsxs)("p",{className:"text-red-500 font-inter italic text-sm",children:[t," tidak boleh lebih dari ",o," karakter"]}),(null==l?void 0:l.type)==="pattern"&&(0,n.jsxs)("p",{className:"text-red-500 font-inter italic text-sm",children:[t," hanya boleh angka."]})]})}},5991:function(e,t,r){"use strict";var n=r(7437);r(2265),t.Z=e=>(0,n.jsx)("span",{className:"loading loading-spinner loading-lg"})},8875:function(e,t,r){"use strict";r.d(t,{I8:function(){return s},Sj:function(){return i},_n:function(){return a},hi:function(){return o}});var n=r(2173);let a="https://back-perpus.fstuogp.com",s=n.Z.create({baseURL:"".concat(a,"/auth")}),i=n.Z.create({baseURL:"".concat(a,"/crud")}),o=n.Z.create({baseURL:"".concat(a,"/api")});n.Z.create({baseURL:"".concat(a,"/storage")})},5967:function(e,t,r){"use strict";var n=r(4660),a=r(4810),s=r(8875),i=r(1490);let o=(0,n.Ue)((0,a.mW)((e,t)=>({setToken:async()=>{let e=i.Z.get("token");return e},setLogin:async e=>{try{let t=await (0,s.I8)({method:"post",url:"/login",data:e});return{status:"success",data:t.data}}catch(e){return{status:"error",error:e.response.data}}},cekToken:async()=>{let e=await t().setToken();try{let t=await (0,s.I8)({method:"post",url:"/cek-token",headers:{Authorization:"Bearer ".concat(e)}});return{status:"success",data:t.data}}catch(e){return{status:"error",error:e.response.data}}}})));t.Z=o},4033:function(e,t,r){e.exports=r(94)},1490:function(e,t,r){"use strict";/*! js-cookie v3.0.5 | MIT */function assign(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)e[n]=r[n]}return e}function init(e,t){function set(r,n,a){if("undefined"!=typeof document){"number"==typeof(a=assign({},t,a)).expires&&(a.expires=new Date(Date.now()+864e5*a.expires)),a.expires&&(a.expires=a.expires.toUTCString()),r=encodeURIComponent(r).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape);var s="";for(var i in a)a[i]&&(s+="; "+i,!0!==a[i]&&(s+="="+a[i].split(";")[0]));return document.cookie=r+"="+e.write(n,r)+s}}return Object.create({set,get:function(t){if("undefined"!=typeof document&&(!arguments.length||t)){for(var r=document.cookie?document.cookie.split("; "):[],n={},a=0;a<r.length;a++){var s=r[a].split("="),i=s.slice(1).join("=");try{var o=decodeURIComponent(s[0]);if(n[o]=e.read(i,o),t===o)break}catch(e){}}return t?n[t]:n}},remove:function(e,t){set(e,"",assign({},t,{expires:-1}))},withAttributes:function(e){return init(this.converter,assign({},this.attributes,e))},withConverter:function(e){return init(assign({},this.converter,e),this.attributes)}},{attributes:{value:Object.freeze(t)},converter:{value:Object.freeze(e)}})}r.d(t,{Z:function(){return n}});var n=init({read:function(e){return'"'===e[0]&&(e=e.slice(1,-1)),e.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent)},write:function(e){return encodeURIComponent(e).replace(/%(2[346BF]|3[AC-F]|40|5[BDE]|60|7[BCD])/g,decodeURIComponent)}},{path:"/"})}},function(e){e.O(0,[8447,5580,5166,4,1396,2971,2472,1744],function(){return e(e.s=3830)}),_N_E=e.O()}]);