(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4483],{5527:function(e,t,a){Promise.resolve().then(a.bind(a,1164))},1164:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return page}});var r=a(7437),n=a(8001),l=a(5991),s=a(4970),c=a(4033),o=a(2265),i=a(8875),d=a(6691),u=a.n(d),h=a(1396),f=a.n(h),katalog_CardKatalog=e=>{let{katalogData:t}=e;return(0,r.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:null==t?void 0:t.map(e=>(0,r.jsx)(f(),{href:"/katalog/detail?katalog_id=".concat(null==e?void 0:e.id),className:"card bg-base-100 shadow-lg",children:(0,r.jsxs)("div",{className:"card bg-neutral-content shadow-xl h-[26rem]",children:[(0,r.jsx)("figure",{children:(0,r.jsx)(u(),{src:"".concat(i._n,"/").concat(e.cover),alt:"Katalog",width:100,height:100,className:"w-full"})}),(0,r.jsxs)("div",{className:"card-body",children:[(0,r.jsx)("h2",{className:"card-title",children:e.penulis}),(0,r.jsx)("p",{children:e.judul}),(0,r.jsx)("p",{children:e.tahun})]})]})},null==e?void 0:e.id))})},g=a(3423),page=e=>{let t=(0,c.useSearchParams)(),a=t.get("jenis")||"",[i,d]=(0,o.useState)(),[u,h]=(0,o.useState)(""),[f,m]=(0,o.useState)(1),[x,p]=(0,o.useState)(12),[j,v]=(0,o.useState)(!0);return(0,o.useEffect)(()=>{window.scrollTo(0,0);let fetchData=async()=>{v(!0);try{let e=await (0,s.Z)({page:f,limit:x,orderBy:"tahun",sort:"desc",search:u,jenis:a});d(e)}catch(e){console.error("Failed to fetch data:",e)}v(!1)};fetchData(),u&&(m(1),fetchData())},[f,x,u,a]),console.log({katalogData:i}),(0,r.jsxs)("div",{className:"flex flex-col gap-y-6 min-h-screen",children:[(0,r.jsxs)("h2",{className:"text-4xl font-bold text-center",children:["Koleksi ",(0,r.jsx)("span",{className:"capitalize",children:a})]}),(0,r.jsxs)("div",{className:"flex gap-x-4 flex-col",children:[(0,r.jsx)(n.Z,{addClass:"w-full",placeholder:"Cari Judul, Pengarang atau Penerbit",onChange:e=>h(e)}),(0,r.jsxs)("h4",{className:"mt-2 text-lg",children:["Total"," ",(0,r.jsxs)("span",{className:"capitalize",children:[a,": ",null==i?void 0:i.total]})]})]}),(0,r.jsxs)("div",{children:[j?(0,r.jsx)("div",{className:"w-full h-full flex justify-center items-center",children:(0,r.jsx)(l.Z,{})}):(0,r.jsx)(katalog_CardKatalog,{katalogData:null==i?void 0:i.data}),(null==i?void 0:i.last_page)>1&&(0,r.jsx)("div",{className:"mt-4",children:(0,r.jsx)(g.Z,{currentPage:null==i?void 0:i.current_page,totalPages:null==i?void 0:i.last_page,setPage:m})})]})]})}},8001:function(e,t,a){"use strict";var r=a(7437);a(2265),t.Z=e=>{let{placeholder:t,addClass:a,onChange:n,defaultValue:l=""}=e;return(0,r.jsx)("div",{className:a,children:(0,r.jsx)("input",{className:"w-full text-gray-700 px-4 py-2 border  border-gray-300 rounded-lg focus:outline-none focus:border-secondary bg-white",placeholder:t,onChange:e=>{n(e.target.value)},defaultValue:l})})}},5991:function(e,t,a){"use strict";var r=a(7437);a(2265),t.Z=e=>(0,r.jsx)("span",{className:"loading loading-spinner loading-lg"})},3423:function(e,t,a){"use strict";var r=a(7437);a(2265);var n=a(4606);t.Z=e=>{let{totalPages:t,currentPage:a,setPage:l}=e,s=[];if(t<=5)s=Array.from({length:t},(e,t)=>t+1);else{s=[1,a-1,a,a+1,t],s=(s=Array.from(new Set(s)).sort((e,t)=>e-t)).filter(e=>e>0&&e<=t);for(let e=1;e<s.length-1;e++)s[e]-s[e-1]>1&&(s.splice(e,0,"..."),e++);t-s[s.length-2]>1&&s.splice(s.length-1,0,"...")}return(0,r.jsx)("div",{className:"h-full",children:(0,r.jsxs)("ol",{className:"flex justify-center gap-1 text-xs font-medium",children:[a>1&&(0,r.jsx)("li",{children:(0,r.jsx)("div",{onClick:()=>l(a-1),className:"cursor-pointer inline-flex h-8 w-8 items-center justify-center rounded border border-gray-100",children:(0,r.jsx)(n.pjk,{})})}),s.map((e,t)=>"..."===e?(0,r.jsx)("li",{className:"flex items-end text-xl",children:(0,r.jsx)("div",{className:"block h-8 w-8 rounded border border-gray-100 text-center leading-8",children:e})},t):(0,r.jsx)("li",{children:(0,r.jsx)("div",{onClick:()=>l(e),className:"cursor-pointer block h-8 w-8 rounded border border-gray-100 text-center leading-8 ".concat(e==a?"bg-blue-900 text-white":""),children:e})},t)),a<t&&(0,r.jsx)("li",{children:(0,r.jsx)("div",{onClick:()=>l(a+1),className:"cursor-pointer inline-flex h-8 w-8 items-center justify-center rounded border border-gray-100",children:(0,r.jsx)(n.fmn,{})})})]})})}},4970:function(e,t,a){"use strict";a.d(t,{W:function(){return getKatalogAll},Z:function(){return getKatalog}});var r=a(8875);async function getKatalog(e){let{search:t="",jenis:a="",page:n=1,limit:l=12,orderBy:s,sort:c}=e,o=await fetch("".concat(r._n,"/api/katalog?jenis=").concat(a,"&search=").concat(t,"&page=").concat(n,"&limit=").concat(l,"&orderBy=").concat(s,"&sort=").concat(c),{next:{revalidate:1e3}});if(!o.ok)throw Error("Failed to fetch data");let{data:i}=await o.json();return i}async function getKatalogAll(e){let{search:t=""}=e,a=await fetch("".concat(r._n,"/api/katalog/all?search=").concat(t),{next:{revalidate:1e3}});if(!a.ok)throw Error("Failed to fetch data");let{data:n}=await a.json();return n}},8875:function(e,t,a){"use strict";a.d(t,{I8:function(){return l},Sj:function(){return s},_n:function(){return n},hi:function(){return c}});var r=a(2173);let n="https://back-perpus.fstuogp.com",l=r.Z.create({baseURL:"".concat(n,"/auth")}),s=r.Z.create({baseURL:"".concat(n,"/crud")}),c=r.Z.create({baseURL:"".concat(n,"/api")});r.Z.create({baseURL:"".concat(n,"/storage")})},1172:function(e,t,a){"use strict";a.d(t,{w_:function(){return GenIcon}});var r=a(2265),n={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},l=r.createContext&&r.createContext(n),__assign=function(){return(__assign=Object.assign||function(e){for(var t,a=1,r=arguments.length;a<r;a++)for(var n in t=arguments[a])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e}).apply(this,arguments)},__rest=function(e,t){var a={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&0>t.indexOf(r)&&(a[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var n=0,r=Object.getOwnPropertySymbols(e);n<r.length;n++)0>t.indexOf(r[n])&&Object.prototype.propertyIsEnumerable.call(e,r[n])&&(a[r[n]]=e[r[n]]);return a};function Tree2Element(e){return e&&e.map(function(e,t){return r.createElement(e.tag,__assign({key:t},e.attr),Tree2Element(e.child))})}function GenIcon(e){return function(t){return r.createElement(IconBase,__assign({attr:__assign({},e.attr)},t),Tree2Element(e.child))}}function IconBase(e){var elem=function(t){var a,n=e.attr,l=e.size,s=e.title,c=__rest(e,["attr","size","title"]),o=l||t.size||"1em";return t.className&&(a=t.className),e.className&&(a=(a?a+" ":"")+e.className),r.createElement("svg",__assign({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},t.attr,n,c,{className:a,style:__assign(__assign({color:e.color||t.color},t.style),e.style),height:o,width:o,xmlns:"http://www.w3.org/2000/svg"}),s&&r.createElement("title",null,s),e.children)};return void 0!==l?r.createElement(l.Consumer,null,function(e){return elem(e)}):elem(n)}}},function(e){e.O(0,[8447,5580,4758,1396,2971,2472,1744],function(){return e(e.s=5527)}),_N_E=e.O()}]);