(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[11],{6237:function(t,r,n){Promise.resolve().then(n.bind(n,6061))},6061:function(t,r,n){"use strict";n.r(r),n.d(r,{default:function(){return page}});var i=n(7437),l=n(2265),o=n(3423),s=n(7310),d=n(4660),u=n(4810),c=n(8875),g=n(5967);let h=(0,d.Ue)((0,u.mW)((t,r)=>({setFormData:t=>{let r=new FormData;return r.append("prodi_id",t.prodi_id),r.append("nama",t.nama),r.append("NPM",t.NPM),r.append("jenkel",t.jenkel),r.append("alamat",t.alamat),r.append("no_hp",t.no_hp),r.append("foto",t.foto),r},dtAnggota:[],showAnggota:[],setAnggota:async r=>{let{page:n=1,limit:i=10,search:l,tipe:o}=r;try{let r=await g.Z.getState().setToken(),s=await (0,c.Sj)({method:"get",url:"/anggota",headers:{Authorization:"Bearer ".concat(r)},params:{limit:i,page:n,search:l,tipe:o}});return t(t=>({...t,dtAnggota:s.data.data})),{status:"berhasil",data:s.data}}catch(t){var s;return{status:"error",error:null===(s=t.response)||void 0===s?void 0:s.data}}},setShowAnggota:async r=>{try{let n=await g.Z.getState().setToken(),i=await (0,c.Sj)({method:"get",url:"/anggota/".concat(r),headers:{Authorization:"Bearer ".concat(n)}});return console.log({response:i}),t(t=>({...t,showAnggota:i.data.data})),{status:"berhasil",data:i.data}}catch(t){var n;return{status:"error",error:null===(n=t.response)||void 0===n?void 0:n.data}}},addData:async n=>{let i=(null==n?void 0:n.foto)?r().setFormData(n):n;try{let r=await g.Z.getState().setToken(),n=await (0,c.Sj)({method:"post",url:"/anggota",headers:{Authorization:"Bearer ".concat(r),"Content-Type":"multipart/form-data"},data:i});return t(t=>({dtAnggota:{last_page:t.dtAnggota.last_page,current_page:t.dtAnggota.current_page,data:[n.data.data,...t.dtAnggota.data]}})),{status:"berhasil tambah",data:n.data}}catch(t){return{status:"error",data:t.response.data}}},removeData:async r=>{try{let n=await g.Z.getState().setToken(),i=await (0,c.Sj)({method:"delete",url:"/anggota/".concat(r),headers:{Authorization:"Bearer ".concat(n)}});return t(t=>({dtAnggota:{last_page:t.dtAnggota.last_page,current_page:t.dtAnggota.current_page,data:t.dtAnggota.data.filter(t=>t.id!==r)}})),{status:"berhasil hapus",data:i.data}}catch(t){return{status:"error",data:t.response.data}}},updateData:async(n,i)=>{delete i.id;let l=(null==i?void 0:i.foto)?r().setFormData(i):i,o=await g.Z.getState().setToken();try{let r=await (0,c.Sj)({url:"/anggota/".concat(n),method:"post",headers:(null==i?void 0:i.foto)?{"Content-Type":"multipart/form-data",Authorization:"Bearer ".concat(o)}:{Authorization:"Bearer ".concat(o)},data:l,params:{_method:"PUT"}});return t(t=>({dtAnggota:{last_page:t.dtAnggota.last_page,current_page:t.dtAnggota.current_page,data:t.dtAnggota.data.map(t=>t.id===n?{...t,...r.data.data}:t)}})),{status:"berhasil update",data:r.data}}catch(t){return{status:"error",data:t.response.data}}}})));var m=n(5991),p=n(4033),anggota_ShowData=t=>{let{setDelete:r,setEdit:n,search:d}=t,{setAnggota:u,dtAnggota:c}=h(),[g,f]=(0,l.useState)(1),[v,y]=(0,l.useState)(10),[x,b]=(0,l.useState)(!0),j=(0,p.useSearchParams)(),w=j&&j.get("jenis")||"",fetchDataAnggota=async()=>{await u({page:g,limit:v,search:d}),b(!1)};return(0,l.useEffect)(()=>(fetchDataAnggota(),()=>{}),[g,v,w]),(0,l.useEffect)(()=>{f(1),fetchDataAnggota()},[d]),(0,i.jsx)("div",{className:"flex-1 flex-col max-w-full h-full overflow-auto",children:x?(0,i.jsx)("div",{className:"w-full h-full flex items-center justify-center",children:(0,i.jsx)(m.Z,{})}):(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("div",{className:"",children:(0,i.jsx)(s.Z,{headTable:["No","Nama","NPM","Prodi","Jenkel","Alamat","No_hp","Foto","Aksi"],tableBodies:["nama","NPM","prodi.nama","jenkel","alamat","no_hp","foto"],dataTable:c.data,page:g,limit:v,setEdit:n,setDelete:r,ubah:!0,hapus:!0})}),(null==c?void 0:c.last_page)>1&&(0,i.jsx)("div",{className:"mt-4",children:(0,i.jsx)(o.Z,{currentPage:null==c?void 0:c.current_page,totalPages:null==c?void 0:c.last_page,setPage:f})})]})})},f=n(5782),v=n(8963),y=n(311),x=n(1865),b=n(592),input_InputRadio=t=>{let{value:r,register:n,required:l,name:o,defaultChecked:s,id:d,errors:u}=t;return(0,i.jsxs)("div",{children:[(0,i.jsxs)("div",{className:"flex gap-1 items-center",children:[(0,i.jsx)("input",{type:"radio",value:r,id:d.toString(),name:o,...n(o,{required:l}),className:"h-4 w-4 radio radio-primary",defaultChecked:s}),(0,i.jsx)("label",{htmlFor:d.toString(),children:r})]}),(null==u?void 0:u.type)==="required"&&(0,i.jsx)("p",{className:"text-red-500 font-inter italic text-sm",children:"Tidak boleh kosong"})]})},j=n(945);let w=(0,d.Ue)((0,u.mW)((t,r)=>({dtProdi:[],setProdi:async r=>{let{page:n=1,limit:i=10,search:l}=r;try{let r=await (0,c.hi)({method:"get",url:"/prodi",params:{limit:i,page:n,search:l}});return t(t=>({...t,dtProdi:r.data})),{status:"berhasil",data:r.data}}catch(t){return{status:"error",error:t.response.data}}}})));n(1240);var form_BodyForm=t=>{var r;let{register:n,errors:o,control:s,dtEdit:d,watch:u,setValue:c,showModal:g,myFile:h,setMyFile:m}=t,{setProdi:p,dtProdi:v}=w(),fetchDataProdi=async t=>{let{search:r}=t;await p({search:r})};return(0,l.useEffect)(()=>{fetchDataProdi({})},[g]),(0,i.jsxs)(i.Fragment,{children:[(null==v?void 0:v.data)&&(0,i.jsx)(j.Z,{label:"Prodi",placeholder:"Pilih Prodi",name:"prodi_id",dataDb:null==v?void 0:v.data,body:["id","nama"],control:s,required:!0,errors:o.prodi_id,addClass:"col-span-4 lg:col-span-2"}),(0,i.jsx)(f.Z,{label:"NPM",name:"NPM",register:n,minLength:10,maxLength:10,required:!0,errors:o.NPM,addClass:"col-span-4 lg:col-span-2",placeholder:"10 digit terakhir dari NPM",type:"number"}),(0,i.jsx)(f.Z,{label:"Nama",name:"nama",register:n,minLength:2,required:!0,errors:o.nama,addClass:"col-span-4"}),(0,i.jsx)(f.Z,{label:"No. HP",name:"no_hp",register:n,minLength:11,maxLength:12,required:!0,errors:o.no_hp,type:"number",addClass:"col-span-4 lg:col-span-2"}),(0,i.jsx)("div",{className:"col-span-4 lg:col-span-2",children:(0,i.jsxs)("div",{className:"w-[100%]",children:[(0,i.jsx)("label",{className:"block py-2 text-sm font-medium text-gray-700 tracking-wide",children:"Jenis Kelamin"}),(0,i.jsxs)("div",{className:"flex gap-2",children:[(0,i.jsx)(input_InputRadio,{id:"Laki-laki",name:"jenkel",value:"Laki-laki",register:n,required:!0,defaultChecked:(null==d?void 0:d.jenkel)==="Laki-laki"}),(0,i.jsx)(input_InputRadio,{id:"Perempuan",name:"jenkel",value:"Perempuan",register:n,required:!0,defaultChecked:(null==d?void 0:d.jenkel)==="Perempuan"})]}),(null==o?void 0:null===(r=o.jenkel)||void 0===r?void 0:r.type)==="required"&&(0,i.jsx)("p",{className:"text-red-500 font-inter italic text-sm",children:"Jenis kelamin tidak boleh kosong"})]})}),(0,i.jsx)(f.Z,{label:"Alamat",name:"alamat",register:n,minLength:1,required:!0,errors:o.alamat,addClass:"col-span-4"}),(0,i.jsx)(b.Z,{label:"Foto",name:"foto",register:n,accept:"image/*",required:!0,errors:o.foto,addClass:"col-span-4",setValue:c,fileEdit:null==d?void 0:d.foto,myFile:h,setMyFile:m})]})},S=n(8528),form_Form=t=>{let{showModal:r,setShowModal:n,dtEdit:o}=t,[s,d]=(0,l.useState)(),u=(0,p.useSearchParams)();u&&u.get("jenis");let{addData:c,updateData:g}=h(),{register:m,handleSubmit:b,setValue:j,control:w,formState:{errors:k},watch:_}=(0,x.cI)(),resetForm=()=>{j("id",""),j("nama",""),j("NPM",""),j("jenkel",""),j("prodi_id",""),j("alamat",""),j("no_hp",""),j("foto",""),d(null)};(0,l.useEffect)(()=>{o?(j("id",o.id),j("nama",o.nama),j("NPM",o.NPM),j("jenkel",o.jenkel),j("prodi_id",parseInt(o.prodi_id)),j("alamat",o.alamat),j("no_hp",o.no_hp),j("foto",o.foto)):resetForm()},[r,o]);let onSubmit=async t=>{if(console.log({row:t}),o){let{data:r}=await g(o.id,t);(0,y.Z)({event:r}),n(!1)}else{let{data:r}=await c(t);console.log({data:r}),(0,y.Z)({event:r}),(null==r?void 0:r.type)!=="success"||resetForm()}};return(0,i.jsx)(v.Z,{title:"Form Anggota",showModal:r,setShowModal:n,children:(0,i.jsxs)("form",{onSubmit:b(onSubmit),children:[(0,i.jsx)(f.Z,{name:"id",register:m,type:"hidden"}),(0,i.jsx)("div",{className:"grid grid-cols-4 gap-2 mb-4",children:(0,i.jsx)(form_BodyForm,{register:m,errors:k,dtEdit:o,control:w,watch:_,setValue:j,showModal:r,myFile:s,setMyFile:d})}),(0,i.jsx)("div",{children:(0,i.jsx)(S.Z,{onClick:b(onSubmit),addClass:"btn-primary",children:"Simpan"})})]})})},k=n(3015),_=n(5925),A=n(8001),page=()=>{let{removeData:t}=h(),[r,n]=(0,l.useState)(!1),[o,s]=(0,l.useState)(!1),[d,u]=(0,l.useState)(),[c,g]=(0,l.useState)(),[m,p]=(0,l.useState)(""),setDelete=async r=>{let{id:n,isDelete:i}=r;if(u(n),i){let{data:r}=await t(d);(0,y.Z)({event:r}),s(!1)}else s(!0)};return(0,i.jsxs)("div",{className:"flex flex-col h-full",children:[(0,i.jsxs)("div",{children:[(0,i.jsx)(_.x7,{}),(0,i.jsx)(form_Form,{dtEdit:c,showModal:r,setShowModal:n}),(0,i.jsx)(k.Z,{showDel:o,setShowDel:s,setDelete:setDelete}),(0,i.jsxs)("div",{className:"mb-4 flex justify-between",children:[(0,i.jsx)("p",{children:"Silahkan mengolah data anggota"}),(0,i.jsx)("div",{children:(0,i.jsx)(S.Z,{onClick:()=>{n(!0),g(null)},addClass:"btn-primary",children:"Tambah"})})]}),(0,i.jsx)(A.Z,{placeholder:"Cari Anggota",onChange:t=>p(t)})]}),(0,i.jsx)(anggota_ShowData,{setDelete:setDelete,setEdit:t=>{n(!0),g(t)},search:m})]})}},592:function(t,r,n){"use strict";var i=n(7437),l=n(8875),o=n(6691),s=n.n(o),d=n(2265),u=n(6678),c=n.n(u);r.Z=t=>{let{label:r,register:n,required:o,name:u,errors:g,addClass:h,accept:m,setValue:p,fileEdit:f,myFile:v,setMyFile:y}=t,[x,b]=(0,d.useState)(),resizeFile=t=>new Promise(()=>{if(t){var r;let n=(null==t?void 0:null===(r=t.type)||void 0===r?void 0:r.split("/"))||[],i=n[0];if("image"!==i)return onSelectFile(t);console.log({splitType:n}),c().imageFileResizer(t,1500,1500,n[1],80,0,t=>{onSelectFile(t)},"file")}else onSelectFile(null)}),onSelectFile=t=>{var r;if(t){let r=new FileReader;r.readAsDataURL(t),r.onloadend=()=>{y(r.result)}}let n=(null==t?void 0:null===(r=t.type)||void 0===r?void 0:r.split("/"))||[];b(n[0]),p(u,t)};return(0,i.jsxs)("div",{className:h,children:[(0,i.jsx)("label",{className:"text-sm font-medium text-gray-700 tracking-wide",children:r}),o&&(0,i.jsx)("span",{className:"ml-1 text-red-600",children:"*"}),(0,i.jsx)("input",{className:"w-full text-base px-4 py-2 border  border-gray-300 rounded-lg focus:outline-none focus:border-secondary",id:"fileInput",type:"file",accept:m,onChange:t=>{var r;let n=(null===(r=t.target)||void 0===r?void 0:r.files[0])||null;resizeFile(n)}}),(0,i.jsx)("input",{type:"hidden",id:r,...n(u,{required:o})}),(0,i.jsxs)("div",{className:"flex gap-4 mt-2",children:[v&&"image"===x&&(0,i.jsx)(s(),{className:"rounded-lg",src:v,width:100,height:100,alt:""}),f&&"file"!==u&&(0,i.jsx)("div",{children:(0,i.jsx)(s(),{src:"".concat(l._n,"/").concat(f),width:100,height:100,alt:""})})]}),(null==g?void 0:g.type)==="required"&&(0,i.jsxs)("p",{className:"text-red-500 font-inter italic text-sm",children:[r," tidak boleh kosong"]})]})}},945:function(t,r,n){"use strict";var i=n(7437);n(2265);var l=n(8749),o=n(1865);r.Z=t=>{let{dataDb:r,body:n,control:s,required:d,name:u,errors:c,placeholder:g,addClass:h,label:m,defaultOptions:p=!0}=t,f={multiValue:(t,r)=>r.data.isFixed?{...t,backgroundColor:"gray"}:t,multiValueLabel:(t,r)=>r.data.isFixed?{...t,fontWeight:"bold",color:"white",paddingRight:6}:t,multiValueRemove:(t,r)=>r.data.isFixed?{...t,display:"none"}:t},getProperty=(t,r)=>{let n=t[r];if("id"===r)return{value:n,label:""};if(!r.includes("."))return{value:"",label:n};{let[n,...i]=r.split("."),l=t[n];return getProperty(l,i.join("."))}},myOptions=()=>{let t=r&&r.map((t,r)=>{let i=n.map(r=>getProperty(t,r)),l=i.map(t=>t.label).filter(t=>""!==t),o=l.join(l.length>1?" - ":"");return{value:i.find(t=>""!==t.value).value,label:o}});return t},filterData=t=>{var r;return null===(r=myOptions())||void 0===r?void 0:r.filter(r=>r.label.toLowerCase().includes(t.toLowerCase()))},loadOptions=(t,r)=>{setTimeout(()=>{r(filterData(t))},1e3)};return(0,i.jsxs)("div",{className:h,children:[m&&(0,i.jsx)("label",{className:"text-sm font-medium text-gray-700 tracking-wide",children:m}),d&&(0,i.jsx)("span",{className:"ml-1 text-red-600",children:"*"}),(0,i.jsx)(o.Qr,{name:u,control:s,rules:{required:d},render:t=>{var r;let{field:{onChange:n,value:o,ref:s}}=t;return(0,i.jsx)(l.Z,{cacheOptions:!0,defaultOptions:p,isClearable:!0,isSearchable:!0,loadOptions:loadOptions,placeholder:g,menuPlacement:"auto",menuPosition:"fixed",styles:f,ref:s,value:(null===(r=myOptions())||void 0===r?void 0:r.find(t=>t.value===o))||null,onChange:t=>n(t?t.value:t)})}}),(null==c?void 0:c.type)==="required"&&(0,i.jsxs)("p",{className:"text-red-500 font-inter italic text-sm",children:[m," tidak boleh kosong"]})]})}},6678:function(t){(()=>{"use strict";var r={d:(t,n)=>{for(var i in n)r.o(n,i)&&!r.o(t,i)&&Object.defineProperty(t,i,{enumerable:!0,get:n[i]})},o:(t,r)=>Object.prototype.hasOwnProperty.call(t,r),r:t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}},n={};function a(t,r){for(var n=0;n<r.length;n++){var i=r[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}r.r(n),r.d(n,{default:()=>l});var i=function(){function e(){!function(t,r){if(!(t instanceof r))throw TypeError("Cannot call a class as a function")}(this,e)}return a(e,[{key:"changeHeightWidth",value:function(t,r,n,i,l,o){return n>i&&(t=Math.round(t*i/n),n=i),t>r&&(n=Math.round(n*r/t),t=r),l&&n<l&&(t=Math.round(t*l/n),n=l),o&&t<o&&(n=Math.round(n*o/t),t=o),{height:t,width:n}}},{key:"resizeAndRotateImage",value:function(t,r,n,i,l){var o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"jpeg",s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:100,d=arguments.length>7&&void 0!==arguments[7]?arguments[7]:0,u=document.createElement("canvas"),c=t.width,g=t.height,h=this.changeHeightWidth(g,n,c,r,i,l);d&&(90===d||270===d)?(u.width=h.height,u.height=h.width):(u.width=h.width,u.height=h.height),c=h.width,g=h.height;var m=u.getContext("2d");return m.fillStyle="rgba(0, 0, 0, 0)",m.fillRect(0,0,c,g),m.imageSmoothingEnabled&&m.imageSmoothingQuality&&(m.imageSmoothingQuality="high"),d&&(m.rotate(d*Math.PI/180),90===d?m.translate(0,-u.width):180===d?m.translate(-u.width,-u.height):270===d?m.translate(-u.height,0):0!==d&&360!==d||m.translate(0,0)),m.drawImage(t,0,0,c,g),u.toDataURL("image/".concat(o),s/100)}},{key:"b64toByteArrays",value:function(t,r){r=r||"image/jpeg";for(var n=atob(t.toString().replace(/^data:image\/(png|jpeg|jpg|webp);base64,/,"")),i=[],l=0;l<n.length;l+=512){for(var o=n.slice(l,l+512),s=Array(o.length),d=0;d<o.length;d++)s[d]=o.charCodeAt(d);var u=new Uint8Array(s);i.push(u)}return i}},{key:"b64toBlob",value:function(t,r){var n=this.b64toByteArrays(t,r);return new Blob(n,{type:r,lastModified:new Date})}},{key:"b64toFile",value:function(t,r,n){var i=this.b64toByteArrays(t,n);return new File(i,r,{type:n,lastModified:new Date})}},{key:"createResizedImage",value:function(t,r,n,i,l,o,s){var d=arguments.length>7&&void 0!==arguments[7]?arguments[7]:"base64",u=arguments.length>8&&void 0!==arguments[8]?arguments[8]:null,c=arguments.length>9&&void 0!==arguments[9]?arguments[9]:null,g=new FileReader;if(!t)throw Error("File Not Found!");if(t.type&&!t.type.includes("image"))throw Error("File Is NOT Image!");g.readAsDataURL(t),g.onload=function(){var h=new Image;h.src=g.result,h.onload=function(){var g=e.resizeAndRotateImage(h,r,n,u,c,i,l,o),m="image/".concat(i);switch(d){case"blob":s(e.b64toBlob(g,m));break;case"base64":default:s(g);break;case"file":var p=t.name.toString().replace(/(png|jpeg|jpg|webp)$/i,"").concat(i.toString());s(e.b64toFile(g,p,m))}}},g.onerror=function(t){throw Error(t)}}}]),e}();let l={imageFileResizer:function(t,r,n,l,o,s,d,u,c,g){return i.createResizedImage(t,r,n,l,o,s,d,u,c,g)}};t.exports=n})()},8749:function(t,r,n){"use strict";n.d(r,{Z:function(){return p}});var i=n(3428),l=n(2265),o=n(1948),s=n(523),d=n(1076),u=n(870),c=n(5184),g=n(2554),h=n(6887),m=["defaultOptions","cacheOptions","loadOptions","options","isLoading","onInputChange","filterOption"];function useAsync(t){var r=t.defaultOptions,n=void 0!==r&&r,i=t.cacheOptions,o=void 0!==i&&i,s=t.loadOptions;t.options;var p=t.isLoading,f=t.onInputChange,v=t.filterOption,y=(0,g.Z)(t,m),x=y.inputValue,b=(0,l.useRef)(void 0),j=(0,l.useRef)(!1),w=(0,l.useState)(Array.isArray(n)?n:void 0),S=(0,c.Z)(w,2),k=S[0],_=S[1],A=(0,l.useState)(void 0!==x?x:""),N=(0,c.Z)(A,2),P=N[0],Z=N[1],F=(0,l.useState)(!0===n),C=(0,c.Z)(F,2),D=C[0],M=C[1],O=(0,l.useState)(void 0),E=(0,c.Z)(O,2),R=E[0],L=E[1],I=(0,l.useState)([]),T=(0,c.Z)(I,2),B=T[0],z=T[1],q=(0,l.useState)(!1),U=(0,c.Z)(q,2),V=U[0],W=U[1],H=(0,l.useState)({}),J=(0,c.Z)(H,2),Q=J[0],K=J[1],$=(0,l.useState)(void 0),G=(0,c.Z)($,2),X=G[0],Y=G[1],ee=(0,l.useState)(void 0),et=(0,c.Z)(ee,2),ea=et[0],er=et[1];o!==ea&&(K({}),er(o)),n!==X&&(_(Array.isArray(n)?n:void 0),Y(n)),(0,l.useEffect)(function(){return j.current=!0,function(){j.current=!1}},[]);var en=(0,l.useCallback)(function(t,r){if(!s)return r();var n=s(t,r);n&&"function"==typeof n.then&&n.then(r,function(){return r()})},[s]);(0,l.useEffect)(function(){!0===n&&en(P,function(t){j.current&&(_(t||[]),M(!!b.current))})},[]);var ei=(0,l.useCallback)(function(t,r){var n=(0,h.L)(t,r,f);if(!n){b.current=void 0,Z(""),L(""),z([]),M(!1),W(!1);return}if(o&&Q[n])Z(n),L(n),z(Q[n]),M(!1),W(!1);else{var i=b.current={};Z(n),M(!0),W(!R),en(n,function(t){j&&i===b.current&&(b.current=void 0,M(!1),L(n),z(t||[]),W(!1),K(t?(0,u.Z)((0,u.Z)({},Q),{},(0,d.Z)({},n,t)):Q))})}},[o,en,R,Q,f]),el=V?[]:P&&R?B:k||[];return(0,u.Z)((0,u.Z)({},y),{},{options:el,isLoading:D||void 0!==p&&p,onInputChange:ei,filterOption:void 0===v?null:v})}n(4887),n(6428);var p=(0,l.forwardRef)(function(t,r){var n=useAsync(t),d=(0,s.u)(n);return l.createElement(o.S,(0,i.Z)({ref:r},d))})}},function(t){t.O(0,[447,990,580,758,166,677,342,589,971,472,744],function(){return t(t.s=6237)}),_N_E=t.O()}]);