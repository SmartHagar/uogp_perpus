(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3011],{6237:function(t,r,l){Promise.resolve().then(l.bind(l,6061))},6061:function(t,r,l){"use strict";l.r(r),l.d(r,{default:function(){return page}});var n=l(7437),i=l(2265),o=l(3423),s=l(7310),d=l(4660),u=l(4810),c=l(8875),g=l(5967);let h=(0,d.Ue)((0,u.mW)((t,r)=>({setFormData:t=>{let r=new FormData;return r.append("prodi_id",t.prodi_id),r.append("nama",t.nama),r.append("NPM",t.NPM),r.append("jenkel",t.jenkel),r.append("alamat",t.alamat),r.append("no_hp",t.no_hp),r.append("foto",t.foto),r},dtAnggota:[],showAnggota:[],setAnggota:async r=>{let{page:l=1,limit:n=10,search:i,tipe:o}=r;try{let r=await g.Z.getState().setToken(),s=await (0,c.Sj)({method:"get",url:"/anggota",headers:{Authorization:"Bearer ".concat(r)},params:{limit:n,page:l,search:i,tipe:o}});return t(t=>({...t,dtAnggota:s.data.data})),{status:"berhasil",data:s.data}}catch(t){var s;return{status:"error",error:null===(s=t.response)||void 0===s?void 0:s.data}}},setShowAnggota:async r=>{try{let l=await g.Z.getState().setToken(),n=await (0,c.Sj)({method:"get",url:"/anggota/".concat(r),headers:{Authorization:"Bearer ".concat(l)}});return console.log({response:n}),t(t=>({...t,showAnggota:n.data.data})),{status:"berhasil",data:n.data}}catch(t){var l;return{status:"error",error:null===(l=t.response)||void 0===l?void 0:l.data}}},addData:async l=>{let n=(null==l?void 0:l.foto)?r().setFormData(l):l;try{let r=await g.Z.getState().setToken(),l=await (0,c.Sj)({method:"post",url:"/anggota",headers:{Authorization:"Bearer ".concat(r),"Content-Type":"multipart/form-data"},data:n});return t(t=>({dtAnggota:{last_page:t.dtAnggota.last_page,current_page:t.dtAnggota.current_page,data:[l.data.data,...t.dtAnggota.data]}})),{status:"berhasil tambah",data:l.data}}catch(t){return{status:"error",data:t.response.data}}},removeData:async r=>{try{let l=await g.Z.getState().setToken(),n=await (0,c.Sj)({method:"delete",url:"/anggota/".concat(r),headers:{Authorization:"Bearer ".concat(l)}});return t(t=>({dtAnggota:{last_page:t.dtAnggota.last_page,current_page:t.dtAnggota.current_page,data:t.dtAnggota.data.filter(t=>t.id!==r)}})),{status:"berhasil hapus",data:n.data}}catch(t){return{status:"error",data:t.response.data}}},updateData:async(l,n)=>{delete n.id;let i=(null==n?void 0:n.foto)?r().setFormData(n):n,o=await g.Z.getState().setToken();try{let r=await (0,c.Sj)({url:"/anggota/".concat(l),method:"post",headers:(null==n?void 0:n.foto)?{"Content-Type":"multipart/form-data",Authorization:"Bearer ".concat(o)}:{Authorization:"Bearer ".concat(o)},data:i,params:{_method:"PUT"}});return t(t=>({dtAnggota:{last_page:t.dtAnggota.last_page,current_page:t.dtAnggota.current_page,data:t.dtAnggota.data.map(t=>t.id===l?{...t,...r.data.data}:t)}})),{status:"berhasil update",data:r.data}}catch(t){return{status:"error",data:t.response.data}}}})));var m=l(5991),p=l(4033),anggota_ShowData=t=>{let{setDelete:r,setEdit:l,search:d}=t,{setAnggota:u,dtAnggota:c}=h(),[g,f]=(0,i.useState)(1),[v,x]=(0,i.useState)(10),[j,b]=(0,i.useState)(!0),y=(0,p.useSearchParams)(),w=y&&y.get("jenis")||"",fetchDataAnggota=async()=>{await u({page:g,limit:v,search:d}),b(!1)};return(0,i.useEffect)(()=>(fetchDataAnggota(),()=>{}),[g,v,w]),(0,i.useEffect)(()=>{f(1),fetchDataAnggota()},[d]),(0,n.jsx)("div",{className:"flex-1 flex-col max-w-full h-full overflow-auto",children:j?(0,n.jsx)("div",{className:"w-full h-full flex items-center justify-center",children:(0,n.jsx)(m.Z,{})}):(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("div",{className:"",children:(0,n.jsx)(s.Z,{headTable:["No","Nama","NPM","Prodi","Jenkel","Alamat","No_hp","Foto","Aksi"],tableBodies:["nama","NPM","prodi.nama","jenkel","alamat","no_hp","foto"],dataTable:c.data,page:g,limit:v,setEdit:l,setDelete:r,ubah:!0,hapus:!0})}),(null==c?void 0:c.last_page)>1&&(0,n.jsx)("div",{className:"mt-4",children:(0,n.jsx)(o.Z,{currentPage:null==c?void 0:c.current_page,totalPages:null==c?void 0:c.last_page,setPage:f})})]})})},f=l(5782),v=l(8963),x=l(311),j=l(1865),b=l(592),input_InputRadio=t=>{let{value:r,register:l,required:i,name:o,defaultChecked:s,id:d,errors:u}=t;return(0,n.jsxs)("div",{children:[(0,n.jsxs)("div",{className:"flex gap-1 items-center",children:[(0,n.jsx)("input",{type:"radio",value:r,id:d.toString(),name:o,...l(o,{required:i}),className:"h-4 w-4 radio radio-primary",defaultChecked:s}),(0,n.jsx)("label",{htmlFor:d.toString(),children:r})]}),(null==u?void 0:u.type)==="required"&&(0,n.jsx)("p",{className:"text-red-500 font-inter italic text-sm",children:"Tidak boleh kosong"})]})},y=l(945);let w=(0,d.Ue)((0,u.mW)((t,r)=>({dtProdi:[],setProdi:async r=>{let{page:l=1,limit:n=10,search:i}=r;try{let r=await (0,c.hi)({method:"get",url:"/prodi",params:{limit:n,page:l,search:i}});return t(t=>({...t,dtProdi:r.data})),{status:"berhasil",data:r.data}}catch(t){return{status:"error",error:t.response.data}}}})));l(1240);var form_BodyForm=t=>{var r;let{register:l,errors:o,control:s,dtEdit:d,watch:u,setValue:c,showModal:g,myFile:h,setMyFile:m}=t,{setProdi:p,dtProdi:v}=w(),fetchDataProdi=async t=>{let{search:r}=t;await p({search:r})};return(0,i.useEffect)(()=>{fetchDataProdi({})},[g]),(0,n.jsxs)(n.Fragment,{children:[(null==v?void 0:v.data)&&(0,n.jsx)(y.Z,{label:"Prodi",placeholder:"Pilih Prodi",name:"prodi_id",dataDb:null==v?void 0:v.data,body:["id","nama"],control:s,required:!0,errors:o.prodi_id,addClass:"col-span-4 lg:col-span-2"}),(0,n.jsx)(f.Z,{label:"NPM",name:"NPM",register:l,minLength:10,maxLength:10,required:!0,errors:o.NPM,addClass:"col-span-4 lg:col-span-2",placeholder:"10 digit terakhir dari NPM",type:"number"}),(0,n.jsx)(f.Z,{label:"Nama",name:"nama",register:l,minLength:2,required:!0,errors:o.nama,addClass:"col-span-4"}),(0,n.jsx)(f.Z,{label:"No. HP",name:"no_hp",register:l,minLength:11,maxLength:12,required:!0,errors:o.no_hp,type:"number",addClass:"col-span-4 lg:col-span-2"}),(0,n.jsx)("div",{className:"col-span-4 lg:col-span-2",children:(0,n.jsxs)("div",{className:"w-[100%]",children:[(0,n.jsx)("label",{className:"block py-2 text-sm font-medium text-gray-700 tracking-wide",children:"Jenis Kelamin"}),(0,n.jsxs)("div",{className:"flex gap-2",children:[(0,n.jsx)(input_InputRadio,{id:"Laki-laki",name:"jenkel",value:"Laki-laki",register:l,required:!0,defaultChecked:(null==d?void 0:d.jenkel)==="Laki-laki"}),(0,n.jsx)(input_InputRadio,{id:"Perempuan",name:"jenkel",value:"Perempuan",register:l,required:!0,defaultChecked:(null==d?void 0:d.jenkel)==="Perempuan"})]}),(null==o?void 0:null===(r=o.jenkel)||void 0===r?void 0:r.type)==="required"&&(0,n.jsx)("p",{className:"text-red-500 font-inter italic text-sm",children:"Jenis kelamin tidak boleh kosong"})]})}),(0,n.jsx)(f.Z,{label:"Alamat",name:"alamat",register:l,minLength:1,required:!0,errors:o.alamat,addClass:"col-span-4"}),(0,n.jsx)(b.Z,{label:"Foto",name:"foto",register:l,accept:"image/*",required:!0,errors:o.foto,addClass:"col-span-4",setValue:c,fileEdit:null==d?void 0:d.foto,myFile:h,setMyFile:m})]})},k=l(8528),form_Form=t=>{let{showModal:r,setShowModal:l,dtEdit:o}=t,[s,d]=(0,i.useState)(),u=(0,p.useSearchParams)();u&&u.get("jenis");let{addData:c,updateData:g}=h(),{register:m,handleSubmit:b,setValue:y,control:w,formState:{errors:S},watch:_}=(0,j.cI)(),resetForm=()=>{y("id",""),y("nama",""),y("NPM",""),y("jenkel",""),y("prodi_id",""),y("alamat",""),y("no_hp",""),y("foto",""),d(null)};(0,i.useEffect)(()=>{o?(y("id",o.id),y("nama",o.nama),y("NPM",o.NPM),y("jenkel",o.jenkel),y("prodi_id",parseInt(o.prodi_id)),y("alamat",o.alamat),y("no_hp",o.no_hp),y("foto",o.foto)):resetForm()},[r,o]);let onSubmit=async t=>{if(console.log({row:t}),o){let{data:r}=await g(o.id,t);(0,x.Z)({event:r}),l(!1)}else{let{data:r}=await c(t);console.log({data:r}),(0,x.Z)({event:r}),(null==r?void 0:r.type)!=="success"||resetForm()}};return(0,n.jsx)(v.Z,{title:"Form Anggota",showModal:r,setShowModal:l,children:(0,n.jsxs)("form",{onSubmit:b(onSubmit),children:[(0,n.jsx)(f.Z,{name:"id",register:m,type:"hidden"}),(0,n.jsx)("div",{className:"grid grid-cols-4 gap-2 mb-4",children:(0,n.jsx)(form_BodyForm,{register:m,errors:S,dtEdit:o,control:w,watch:_,setValue:y,showModal:r,myFile:s,setMyFile:d})}),(0,n.jsx)("div",{children:(0,n.jsx)(k.Z,{type:"submit",onClick:b(onSubmit),addClass:"btn-primary",children:"Simpan"})})]})})},S=l(3015),_=l(5925),N=l(8001),page=()=>{let{removeData:t}=h(),[r,l]=(0,i.useState)(!1),[o,s]=(0,i.useState)(!1),[d,u]=(0,i.useState)(),[c,g]=(0,i.useState)(),[m,p]=(0,i.useState)(""),setDelete=async r=>{let{id:l,isDelete:n}=r;if(u(l),n){let{data:r}=await t(d);(0,x.Z)({event:r}),s(!1)}else s(!0)};return(0,n.jsxs)("div",{className:"flex flex-col h-full",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)(_.x7,{}),(0,n.jsx)(form_Form,{dtEdit:c,showModal:r,setShowModal:l}),(0,n.jsx)(S.Z,{showDel:o,setShowDel:s,setDelete:setDelete}),(0,n.jsxs)("div",{className:"mb-4 flex justify-between",children:[(0,n.jsx)("p",{children:"Silahkan mengolah data anggota"}),(0,n.jsx)("div",{children:(0,n.jsx)(k.Z,{onClick:()=>{l(!0),g(null)},addClass:"btn-primary",children:"Tambah"})})]}),(0,n.jsx)(N.Z,{placeholder:"Cari Anggota",onChange:t=>p(t)})]}),(0,n.jsx)(anggota_ShowData,{setDelete:setDelete,setEdit:t=>{l(!0),g(t)},search:m})]})}},592:function(t,r,l){"use strict";var n=l(7437),i=l(8875),o=l(6691),s=l.n(o),d=l(2265),u=l(6678),c=l.n(u);r.Z=t=>{let{label:r,register:l,required:o,name:u,errors:g,addClass:h,accept:m,setValue:p,fileEdit:f,myFile:v,setMyFile:x}=t,[j,b]=(0,d.useState)(),resizeFile=t=>new Promise(()=>{if(t){var r;let l=(null==t?void 0:null===(r=t.type)||void 0===r?void 0:r.split("/"))||[],n=l[0];if("image"!==n)return onSelectFile(t);console.log({splitType:l}),c().imageFileResizer(t,1500,1500,l[1],80,0,t=>{onSelectFile(t)},"file")}else onSelectFile(null)}),onSelectFile=t=>{var r;if(t){let r=new FileReader;r.readAsDataURL(t),r.onloadend=()=>{x(r.result)}}let l=(null==t?void 0:null===(r=t.type)||void 0===r?void 0:r.split("/"))||[];b(l[0]),p(u,t)};return(0,n.jsxs)("div",{className:h,children:[(0,n.jsx)("label",{className:"text-sm font-medium text-gray-700 tracking-wide",children:r}),o&&(0,n.jsx)("span",{className:"ml-1 text-red-600",children:"*"}),(0,n.jsx)("input",{className:"w-full text-base px-4 py-2 border  border-gray-300 rounded-lg focus:outline-none focus:border-secondary",id:"fileInput",type:"file",accept:m,onChange:t=>{var r;let l=(null===(r=t.target)||void 0===r?void 0:r.files[0])||null;resizeFile(l)}}),(0,n.jsx)("input",{type:"hidden",id:r,...l(u,{required:o})}),(0,n.jsxs)("div",{className:"flex gap-4 mt-2",children:[v&&"image"===j&&(0,n.jsx)(s(),{className:"rounded-lg",src:v,width:100,height:100,alt:""}),f&&"file"!==u&&(0,n.jsx)("div",{children:(0,n.jsx)(s(),{src:"".concat(i._n,"/").concat(f),width:100,height:100,alt:""})})]}),(null==g?void 0:g.type)==="required"&&(0,n.jsxs)("p",{className:"text-red-500 font-inter italic text-sm",children:[r," tidak boleh kosong"]})]})}},945:function(t,r,l){"use strict";var n=l(7437);l(2265);var i=l(8749),o=l(1865);r.Z=t=>{let{dataDb:r,body:l,control:s,required:d,name:u,errors:c,placeholder:g,addClass:h,label:m,defaultOptions:p=!0,menuPosition:f}=t,v={multiValue:(t,r)=>r.data.isFixed?{...t,backgroundColor:"gray"}:t,multiValueLabel:(t,r)=>r.data.isFixed?{...t,fontWeight:"bold",color:"white",paddingRight:6}:t,multiValueRemove:(t,r)=>r.data.isFixed?{...t,display:"none"}:t},getProperty=(t,r)=>{let l=t[r];if("id"===r)return{value:l,label:""};if(!r.includes("."))return{value:"",label:l};{let[l,...n]=r.split("."),i=t[l];return getProperty(i,n.join("."))}},myOptions=()=>{let t=r&&r.map((t,r)=>{let n=l.map(r=>getProperty(t,r)),i=n.map(t=>t.label).filter(t=>""!==t),o=i.join(i.length>1?" - ":"");return{value:n.find(t=>""!==t.value).value,label:o}});return t},filterData=t=>{var r;return null===(r=myOptions())||void 0===r?void 0:r.filter(r=>r.label.toLowerCase().includes(t.toLowerCase()))},loadOptions=(t,r)=>{setTimeout(()=>{r(filterData(t))},1e3)};return(0,n.jsxs)("div",{className:h,children:[m&&(0,n.jsx)("label",{className:"text-sm font-medium text-gray-700 tracking-wide",children:m}),d&&(0,n.jsx)("span",{className:"ml-1 text-red-600",children:"*"}),(0,n.jsx)(o.Qr,{name:u,control:s,rules:{required:d},render:t=>{var r;let{field:{onChange:l,value:o,ref:s}}=t;return(0,n.jsx)(i.Z,{cacheOptions:!0,defaultOptions:p,isClearable:!0,isSearchable:!0,loadOptions:loadOptions,placeholder:g,menuPlacement:"auto",menuPosition:f,styles:v,ref:s,value:(null===(r=myOptions())||void 0===r?void 0:r.find(t=>t.value===o))||null,onChange:t=>l(t?t.value:t)})}}),(null==c?void 0:c.type)==="required"&&(0,n.jsxs)("p",{className:"text-red-500 font-inter italic text-sm",children:[m," tidak boleh kosong"]})]})}},6678:function(t){(()=>{"use strict";var r={d:(t,l)=>{for(var n in l)r.o(l,n)&&!r.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:l[n]})},o:(t,r)=>Object.prototype.hasOwnProperty.call(t,r),r:t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}},l={};function a(t,r){for(var l=0;l<r.length;l++){var n=r[l];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}r.r(l),r.d(l,{default:()=>i});var n=function(){function e(){!function(t,r){if(!(t instanceof r))throw TypeError("Cannot call a class as a function")}(this,e)}return a(e,[{key:"changeHeightWidth",value:function(t,r,l,n,i,o){return l>n&&(t=Math.round(t*n/l),l=n),t>r&&(l=Math.round(l*r/t),t=r),i&&l<i&&(t=Math.round(t*i/l),l=i),o&&t<o&&(l=Math.round(l*o/t),t=o),{height:t,width:l}}},{key:"resizeAndRotateImage",value:function(t,r,l,n,i){var o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"jpeg",s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:100,d=arguments.length>7&&void 0!==arguments[7]?arguments[7]:0,u=document.createElement("canvas"),c=t.width,g=t.height,h=this.changeHeightWidth(g,l,c,r,n,i);d&&(90===d||270===d)?(u.width=h.height,u.height=h.width):(u.width=h.width,u.height=h.height),c=h.width,g=h.height;var m=u.getContext("2d");return m.fillStyle="rgba(0, 0, 0, 0)",m.fillRect(0,0,c,g),m.imageSmoothingEnabled&&m.imageSmoothingQuality&&(m.imageSmoothingQuality="high"),d&&(m.rotate(d*Math.PI/180),90===d?m.translate(0,-u.width):180===d?m.translate(-u.width,-u.height):270===d?m.translate(-u.height,0):0!==d&&360!==d||m.translate(0,0)),m.drawImage(t,0,0,c,g),u.toDataURL("image/".concat(o),s/100)}},{key:"b64toByteArrays",value:function(t,r){r=r||"image/jpeg";for(var l=atob(t.toString().replace(/^data:image\/(png|jpeg|jpg|webp);base64,/,"")),n=[],i=0;i<l.length;i+=512){for(var o=l.slice(i,i+512),s=Array(o.length),d=0;d<o.length;d++)s[d]=o.charCodeAt(d);var u=new Uint8Array(s);n.push(u)}return n}},{key:"b64toBlob",value:function(t,r){var l=this.b64toByteArrays(t,r);return new Blob(l,{type:r,lastModified:new Date})}},{key:"b64toFile",value:function(t,r,l){var n=this.b64toByteArrays(t,l);return new File(n,r,{type:l,lastModified:new Date})}},{key:"createResizedImage",value:function(t,r,l,n,i,o,s){var d=arguments.length>7&&void 0!==arguments[7]?arguments[7]:"base64",u=arguments.length>8&&void 0!==arguments[8]?arguments[8]:null,c=arguments.length>9&&void 0!==arguments[9]?arguments[9]:null,g=new FileReader;if(!t)throw Error("File Not Found!");if(t.type&&!t.type.includes("image"))throw Error("File Is NOT Image!");g.readAsDataURL(t),g.onload=function(){var h=new Image;h.src=g.result,h.onload=function(){var g=e.resizeAndRotateImage(h,r,l,u,c,n,i,o),m="image/".concat(n);switch(d){case"blob":s(e.b64toBlob(g,m));break;case"base64":default:s(g);break;case"file":var p=t.name.toString().replace(/(png|jpeg|jpg|webp)$/i,"").concat(n.toString());s(e.b64toFile(g,p,m))}}},g.onerror=function(t){throw Error(t)}}}]),e}();let i={imageFileResizer:function(t,r,l,i,o,s,d,u,c,g){return n.createResizedImage(t,r,l,i,o,s,d,u,c,g)}};t.exports=l})()}},function(t){t.O(0,[8447,6990,5580,4758,5166,4,1356,341,2209,589,2971,2472,1744],function(){return t(t.s=6237)}),_N_E=t.O()}]);