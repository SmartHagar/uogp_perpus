(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2682],{8686:function(e,a,t){Promise.resolve().then(t.bind(t,5499))},5499:function(e,a,t){"use strict";t.r(a),t.d(a,{default:function(){return page}});var l=t(7437),r=t(2265),s=t(7310),n=t(5991),i=t(4033),o=t(6446),katalog_ShowData=e=>{let{setDelete:a,setEdit:t}=e,{setLapKatalog:c,dtKatalog:u}=(0,o.Z)(),[d,h]=(0,r.useState)(!0),p=(0,i.useSearchParams)(),m=p&&p.get("jenis")||"",f=p&&p.get("tahun")||"",fetchDataKatalog=async()=>{await c({jenis:m,tahun:f}),h(!1)};return(0,r.useEffect)(()=>(fetchDataKatalog(),()=>{}),[m,f]),(0,l.jsx)("div",{className:"flex-1 flex-col max-w-full h-full overflow-auto",children:d?(0,l.jsx)("div",{className:"w-full h-full flex items-center justify-center",children:(0,l.jsx)(n.Z,{})}):(0,l.jsx)(l.Fragment,{children:(0,l.jsx)("div",{className:"",children:(0,l.jsx)(s.Z,{headTable:["No","Class Sub","Judul","Penulis","Penerbit","Jenis","Tahun","Stok"],tableBodies:["class_sub.nm_sub","judul","penulis","penerbit","jenis","tahun","stok"],dataTable:u.data,page:1,limit:10,setEdit:t,setDelete:a,ubah:!1,hapus:!1})})})})},c=t(8528),u=t(675),d=t(1865),h=t(5022),p=t(8875),page=()=>{let{register:e,control:a,formState:{errors:t},watch:s}=(0,d.cI)(),n=(0,i.useRouter)(),o=s("tahun")||"",m=s("jenis")||"";(0,r.useEffect)(()=>(n.push("katalog?jenis=".concat(m,"&tahun=").concat(o)),()=>{}),[o,m]);let setDelete=async e=>{let{id:a,isDelete:t}=e};return(0,l.jsxs)("div",{className:"flex flex-col h-full",children:[(0,l.jsx)("div",{children:(0,l.jsxs)("div",{className:"mb-4 flex justify-between gap-8 items-center",children:[(0,l.jsxs)("div",{className:"grow w-full grid grid-cols-2 gap-2",children:[(0,l.jsx)(u.Z,{label:"Tahun",name:"tahun",start:new Date().getFullYear()-10,end:new Date().getFullYear(),control:a,placeholder:"Pilih",errors:t.tahun}),(0,l.jsx)(h.u,{label:"Jenis Katalog",defaultOption:"Pilih Jenis",register:e,errors:t,name:"jenis",options:[{value:"buku",label:"Buku"},{value:"jurnal",label:"Jurnal"},{value:"tugas akhir",label:"Tugas Akhir"}]})]}),(0,l.jsx)("div",{children:(0,l.jsx)(c.Z,{onClick:()=>{window.open("".concat(p._n,"/laporan/katalog?jenis=").concat(m,"&tahun=").concat(o),"_blank")},addClass:"btn-primary",children:"Cetak"})})]})}),(0,l.jsx)(katalog_ShowData,{setDelete:setDelete,setEdit:e=>{}})]})}},8528:function(e,a,t){"use strict";var l=t(7437);t(2265),a.Z=e=>{let{onClick:a,addClass:t,children:r,type:s}=e;return(0,l.jsx)("button",{onClick:a,type:s,className:"btn btn-active ".concat(t),children:r})}},5991:function(e,a,t){"use strict";var l=t(7437);t(2265),a.Z=e=>(0,l.jsx)("span",{className:"loading loading-spinner loading-lg"})},5022:function(e,a,t){"use strict";t.d(a,{u:function(){return SelectDefault}});var l=t(7437);t(2265);let SelectDefault=e=>{var a;let{label:t,register:r,required:s,name:n,placeholder:i,defaultOption:o,options:c=[],errors:u,addClass:d}=e;return(0,l.jsxs)("div",{className:d,children:[(0,l.jsx)("label",{className:"text-sm font-medium text-gray-700 tracking-wide",children:t}),s&&(0,l.jsx)("span",{className:"ml-1 text-red-600",children:"*"}),(0,l.jsx)("div",{className:"relative",children:(0,l.jsxs)("select",{className:"w-full rounded-lg py-2 px-2 bg-white border border-gray-300 focus:outline-none focus:border-secondary",id:t,placeholder:i,...r(n,{required:s}),children:[(0,l.jsx)("option",{value:"",children:o}),c.map((e,a)=>(0,l.jsx)("option",{value:e.value,children:e.label},a))]})}),(null===(a=u[n])||void 0===a?void 0:a.type)==="required"&&(0,l.jsxs)("p",{className:"text-red-500 font-inter italic text-sm",children:[t," tidak boleh kosong"]})]})}},675:function(e,a,t){"use strict";t.d(a,{Z:function(){return select_SelectTahun}});var l=t(7437),r=t(2265),s=t(523),n=t(3428),i=t(1948);t(6335),t(4887),t(6428);var o=(0,r.forwardRef)(function(e,a){var t=(0,s.u)(e);return r.createElement(i.S,(0,n.Z)({ref:a},t))}),c=t(2067),u=t.n(c),d=t(1865),select_SelectTahun=e=>{let{label:a,start:t=2012,end:r=u()().format("YYYY"),control:s,required:n,name:i,errors:c,addClass:h,menuPosition:p,placeholder:m="Pilih Tahun"}=e,pilihTahun=()=>{let e=[];for(let a=r;a>=t;a--)e.push({value:a,label:a});return e};return(0,l.jsxs)("div",{className:h,children:[(0,l.jsx)("label",{className:"text-sm font-medium text-gray-700 tracking-wide",children:a}),n&&(0,l.jsx)("span",{className:"ml-1 text-red-600",children:"*"}),(0,l.jsx)(d.Qr,{name:i,control:s,rules:{required:n},render:e=>{let{field:{onChange:a,value:t,name:r,ref:s}}=e;return(0,l.jsx)(o,{isClearable:!0,isSearchable:!0,options:pilihTahun(),placeholder:m,menuPosition:p,ref:s,value:t?pilihTahun().find(e=>e.value===t):t,onChange:e=>a(e?e.value:e)})}}),(null==c?void 0:c.type)==="required"&&(0,l.jsx)("p",{className:"text-red-500 font-inter italic text-sm",children:"Tahun tidak boleh kosong"})]})}},7310:function(e,a,t){"use strict";t.d(a,{Z:function(){return tables_TablesDefault}});var l=t(7437);t(2265);var r=t(8875),s=t(6691),n=t.n(s),i=t(2067),o=t.n(i);t(1371),o().locale("id");var c=o(),services_getProperty=(e,a)=>{let t=a.split(".");if(Array.isArray(t)){let s=t.length>1?t.pop():t,i=t.length,o=1,u=t[0];for(;(e=e[u])&&o<i;)u=t[o],o++;if("object"==typeof e)return e?e[s]:"";if("tgl_pinjam"===a||"tgl_kembali"===a)return c(e).format("DD/MMM/YYYY");if("image"===a||"foto"===a||"cover"===a){let a=e,t=a?a.substring(0,4):"",s=a?"".concat(r._n,"/").concat(a):"/images/no-image.png";return"http"===t&&(s=a),e&&(0,l.jsx)(n(),{src:s,width:100,height:100,alt:""})}return"link"===a?e&&(0,l.jsx)("a",{href:"/stackholder/penilaian?link=".concat(e),target:"_blank",className:"hover:underline",children:"Buka Link"}):e}throw"parts is not valid array"},u=t(4033),d=t(4606),tables_TablesDefault=e=>{var a;(0,u.useRouter)();let showNo=a=>(e.page-1)*e.limit+a+1;return(null==e?void 0:null===(a=e.dataTable)||void 0===a?void 0:a.length)===0?(0,l.jsx)("div",{className:"flex justify-center mt-8",children:(0,l.jsx)("p",{children:"Tidak ada data"})}):(0,l.jsxs)("table",{className:"w-full border-collapse text-left",children:[(0,l.jsx)("thead",{className:"",children:(0,l.jsx)("tr",{children:e.headTable&&e.headTable.map((e,a)=>(0,l.jsx)("th",{scope:"col",className:"px-6 py-4",children:e},a))})}),(0,l.jsx)("tbody",{className:"divide-y divide-gray-100 border-t border-gray-100 ",children:e.dataTable&&e.dataTable.map((a,t)=>{let{id:r}=a;return(0,l.jsxs)("tr",{children:[(0,l.jsx)("td",{className:"px-6 py-4 rounded-l-xl",children:showNo(t)}),e.tableBodies.map((e,t)=>(0,l.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:services_getProperty(a,e)},t)),(0,l.jsx)("td",{className:"px-6 py-4 rounded-r-xl",children:(0,l.jsxs)("div",{className:"flex flex-row gap-2",children:[e.costume&&e.costume(a),e.ubah&&(0,l.jsx)(d.Ph1,{onClick:()=>e.setEdit(a),size:20,className:"cursor-pointer hover:text-yellow-500",title:"Ubah"}),e.hapus&&(0,l.jsx)(d.AuQ,{onClick:()=>(null==e?void 0:e.setDelete)&&(null==e?void 0:e.setDelete({id:r,isDelete:!1})),size:20,className:"cursor-pointer hover:text-red-700",title:"Hapus"})]})})]},t)})})]})}},8875:function(e,a,t){"use strict";t.d(a,{I8:function(){return s},Sj:function(){return n},_n:function(){return r},hi:function(){return i}});var l=t(2173);let r="https://perpus.thina.my.id",s=l.Z.create({baseURL:"".concat(r,"/auth")}),n=l.Z.create({baseURL:"".concat(r,"/crud")}),i=l.Z.create({baseURL:"".concat(r,"/api")});l.Z.create({baseURL:"".concat(r,"/storage")})},6446:function(e,a,t){"use strict";var l=t(4660),r=t(4810),s=t(8875);let n=(0,l.Ue)((0,r.mW)((e,a)=>({dtKatalog:[],setKatalog:async a=>{let{page:t=1,limit:l=10,orderBy:r,sort:n,search:i}=a;try{let a=await (0,s.hi)({method:"get",url:"/katalog",params:{limit:l,page:t,orderBy:r,sort:n,search:i}});return e(e=>({...e,dtKatalog:a.data})),{status:"berhasil",data:a.data}}catch(e){return{status:"error",error:e.response.data}}},setKatalogAll:async a=>{let{search:t}=a;try{let a=await (0,s.hi)({method:"get",url:"/katalog/all",params:{search:t}});return e(e=>({...e,dtKatalog:a.data})),{status:"berhasil",data:a.data}}catch(e){return{status:"error",error:e.response.data}}},setKatalogReady:async a=>{let{search:t,jenis:l}=a;try{let a=await (0,s.hi)({method:"get",url:"/katalog/ready",params:{search:t,jenis:l}});return e(e=>({...e,dtKatalog:a.data})),{status:"berhasil",data:a.data}}catch(e){return{status:"error",error:e.response.data}}},setKatalogDetail:async a=>{try{let t=await (0,s.hi)({method:"get",url:"/katalog/detail/".concat(a)});return e(e=>{var a;return{...e,dtKatalog:null===(a=t.data)||void 0===a?void 0:a.data}}),{status:"berhasil",data:t.data}}catch(e){return{status:"error",error:e.response.data}}},setLapKatalog:async a=>{let{jenis:t,tahun:l}=a;try{let a=await (0,s.hi)({method:"get",url:"/katalog/laporan",params:{jenis:t,tahun:l}});return e(e=>({...e,dtKatalog:a.data})),{status:"berhasil",data:a.data}}catch(e){return{status:"error",error:e.response.data}}}})));a.Z=n}},function(e){e.O(0,[8447,6990,5580,4758,5166,4,1356,2971,2472,1744],function(){return e(e.s=8686)}),_N_E=e.O()}]);