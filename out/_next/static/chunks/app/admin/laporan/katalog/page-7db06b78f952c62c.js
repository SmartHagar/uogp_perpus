(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2682],{4065:function(e,a,t){Promise.resolve().then(t.bind(t,5499))},5499:function(e,a,t){"use strict";t.r(a),t.d(a,{default:function(){return page}});var r=t(7437),l=t(2265),s=t(3842),n=t(5991),i=t(4033),o=t(6446),katalog_ShowData=e=>{let{setDelete:a,setEdit:t}=e,{setLapKatalog:c,dtKatalog:u}=(0,o.Z)(),[d,h]=(0,l.useState)(!0),p=(0,i.useSearchParams)(),m=p&&p.get("jenis")||"",g=p&&p.get("tahun")||"",fetchDataKatalog=async()=>{await c({jenis:m,tahun:g}),h(!1)};return(0,l.useEffect)(()=>(fetchDataKatalog(),()=>{}),[m,g]),(0,r.jsx)("div",{className:"flex-1 flex-col max-w-full h-full overflow-auto",children:d?(0,r.jsx)("div",{className:"w-full h-full flex items-center justify-center",children:(0,r.jsx)(n.Z,{})}):(0,r.jsx)(r.Fragment,{children:(0,r.jsx)("div",{className:"",children:(0,r.jsx)(s.Z,{headTable:["No","Class Sub","Judul","Penulis","Penerbit","Jenis","Tahun","Stok"],tableBodies:["class_sub.nm_sub","judul","penulis","penerbit","jenis","tahun","stok"],dataTable:u.data,page:1,limit:10,setEdit:t,setDelete:a,ubah:!1,hapus:!1})})})})},c=t(8528),u=t(675),d=t(1865),h=t(5022),p=t(8875),page=()=>{let{register:e,control:a,formState:{errors:t},watch:s}=(0,d.cI)(),n=(0,i.useRouter)(),o=s("tahun")||"",m=s("jenis")||"";(0,l.useEffect)(()=>(n.push("katalog?jenis=".concat(m,"&tahun=").concat(o)),()=>{}),[o,m]);let setDelete=async e=>{let{id:a,isDelete:t}=e};return(0,r.jsxs)("div",{className:"flex flex-col h-full",children:[(0,r.jsx)("div",{children:(0,r.jsxs)("div",{className:"mb-4 flex justify-between gap-8 items-center",children:[(0,r.jsxs)("div",{className:"grow w-full grid grid-cols-2 gap-2",children:[(0,r.jsx)(u.Z,{label:"Tahun",name:"tahun",start:new Date().getFullYear()-10,end:new Date().getFullYear(),control:a,placeholder:"Pilih",errors:t.tahun}),(0,r.jsx)(h.u,{label:"Jenis Katalog",defaultOption:"Pilih Jenis",register:e,errors:t,name:"jenis",options:[{value:"buku",label:"Buku"},{value:"jurnal",label:"Jurnal"},{value:"tugas akhir",label:"Tugas Akhir"}]})]}),(0,r.jsx)("div",{children:(0,r.jsx)(c.Z,{onClick:()=>{window.open("".concat(p._n,"/laporan/katalog?jenis=").concat(m,"&tahun=").concat(o),"_blank")},addClass:"btn-primary",children:"Cetak"})})]})}),(0,r.jsx)(katalog_ShowData,{setDelete:setDelete,setEdit:e=>{}})]})}},8528:function(e,a,t){"use strict";var r=t(7437);t(2265),a.Z=e=>{let{onClick:a,addClass:t,children:l,type:s}=e;return(0,r.jsx)("button",{onClick:a,type:s,className:"btn btn-active ".concat(t),children:l})}},5991:function(e,a,t){"use strict";var r=t(7437);t(2265),a.Z=e=>(0,r.jsx)("span",{className:"loading loading-spinner loading-lg"})},5022:function(e,a,t){"use strict";t.d(a,{u:function(){return SelectDefault}});var r=t(7437);t(2265);let SelectDefault=e=>{var a;let{label:t,register:l,required:s,name:n,placeholder:i,defaultOption:o,options:c=[],errors:u,addClass:d}=e;return(0,r.jsxs)("div",{className:d,children:[(0,r.jsx)("label",{className:"text-sm font-medium text-gray-700 tracking-wide",children:t}),s&&(0,r.jsx)("span",{className:"ml-1 text-red-600",children:"*"}),(0,r.jsx)("div",{className:"relative",children:(0,r.jsxs)("select",{className:"w-full rounded-lg py-2 px-2 bg-white border border-gray-300 focus:outline-none focus:border-secondary",id:t,placeholder:i,...l(n,{required:s}),children:[(0,r.jsx)("option",{value:"",children:o}),c.map((e,a)=>(0,r.jsx)("option",{value:e.value,children:e.label},a))]})}),(null===(a=u[n])||void 0===a?void 0:a.type)==="required"&&(0,r.jsxs)("p",{className:"text-red-500 font-inter italic text-sm",children:[t," tidak boleh kosong"]})]})}},675:function(e,a,t){"use strict";t.d(a,{Z:function(){return select_SelectTahun}});var r=t(7437),l=t(2265),s=t(523),n=t(3428),i=t(1948);t(6335),t(4887),t(6428);var o=(0,l.forwardRef)(function(e,a){var t=(0,s.u)(e);return l.createElement(i.S,(0,n.Z)({ref:a},t))}),c=t(2067),u=t.n(c),d=t(1865),select_SelectTahun=e=>{let{label:a,start:t=2012,end:l=u()().format("YYYY"),control:s,required:n,name:i,errors:c,addClass:h,menuPosition:p,placeholder:m="Pilih Tahun"}=e,pilihTahun=()=>{let e=[];for(let a=l;a>=t;a--)e.push({value:a,label:a});return e};return(0,r.jsxs)("div",{className:h,children:[(0,r.jsx)("label",{className:"text-sm font-medium text-gray-700 tracking-wide",children:a}),n&&(0,r.jsx)("span",{className:"ml-1 text-red-600",children:"*"}),(0,r.jsx)(d.Qr,{name:i,control:s,rules:{required:n},render:e=>{let{field:{onChange:a,value:t,name:l,ref:s}}=e;return(0,r.jsx)(o,{isClearable:!0,isSearchable:!0,options:pilihTahun(),placeholder:m,menuPosition:p,ref:s,value:t?pilihTahun().find(e=>e.value===t):t,onChange:e=>a(e?e.value:e)})}}),(null==c?void 0:c.type)==="required"&&(0,r.jsx)("p",{className:"text-red-500 font-inter italic text-sm",children:"Tahun tidak boleh kosong"})]})}},3842:function(e,a,t){"use strict";t.d(a,{Z:function(){return tables_TablesDefault}});var r=t(7437),l=t(8875),s=t(6691),n=t.n(s),i=t(2067),o=t.n(i),rupiah=e=>{let a=e.toString().replace(/\B(?=(\d{3})+(?!\d))/g,".");return"Rp. ".concat(a)},services_getProperty=(e,a,t,s)=>{var i,c,u;null==e||null===(i=e.thn_angkatan)||void 0===i||i.substring(2),null==e||null===(u=e.mhs)||void 0===u||null===(c=u.thn_angkatan)||void 0===c||c.substring(2);let d=null==e?void 0:e.simpanan,h=null==d?void 0:d.reduce((e,a)=>e+parseInt(a.nominal),0),p=a.split(".");if(Array.isArray(p)){let i=p.length>1?p.pop():p,c=p.length,u=1,d=p[0];for(;(e=e[d])&&u<c;)d=p[u],u++;return"object"==typeof e?e?e[i]:"":"tgl_masuk"===a||"tgl_simpanan"===a||"tgl_lahir"===a||"tgl_pinjam"===a||"tgl_bayar"===a?o()(e).format("DD/MM/YYYY"):["bukti_bayar","bukti","foto","fotoktp","cover"].includes(a)?e&&(0,r.jsx)(n(),{src:"".concat(l._n,"/").concat(e),loading:"lazy",width:70,height:70,alt:"",className:"cursor-pointer",onClick:s?()=>s(t):void 0}):"nominal"===a||"angsuran"===a?rupiah(e):"jmlh_simpanan"===a?rupiah(h):"file"===a?e&&(0,r.jsx)("a",{href:"".concat(l._n,"/").concat(e),target:"_blank",children:"Lihat File"}):(0,r.jsx)("p",{className:"capitalize",children:e})}throw"parts is not valid array"},c=t(4033),u=t(2265),d=t(4606),tables_TablesDefault=e=>{let a=(0,c.useRouter)(),t=(0,c.useSearchParams)(),[l,s]=(0,u.useState)(0),[n,i]=(0,u.useState)(),[o,h]=(0,u.useState)(),showNo=a=>(e.page-1)*e.limit+a+1,p=t.get("sortby"),sortBy=(e,t)=>{i(e);let r=window.location.href,n=new URL(r),o=new URLSearchParams(n.search),c=e===p?l+1:1,u=c%2==0?"desc":"asc";o.delete("sortby"),o.delete("order"),o.append("sortby",e),o.append("order",u),n.search=o.toString(),a.push(n.toString()),s(c),h(u)};(0,u.useEffect)(()=>{e.sorter&&sortBy(e.sorter)},[e.sorter]);let handleRow=a=>{e.rowClick&&e.rowClick(a)};return(0,r.jsxs)("table",{className:"w-full border-collapse text-left bg-white",children:[(0,r.jsx)("thead",{className:"",children:(0,r.jsx)("tr",{children:e.headTable&&e.headTable.map((a,t)=>{let l=e.tableBodies[t-1];return(0,r.jsx)("th",{scope:"col",className:"px-6 py-4 ".concat(!("Aksi"===a||"No"===a)&&"cursor-pointer"),onClick:()=>{"Aksi"===a||"No"===a||sortBy(l,t)},children:(0,r.jsxs)("div",{className:"flex items-center gap-1",children:[a,n===l&&(0,r.jsxs)("span",{className:"flex",children:[(0,r.jsx)(d.mXI,{className:"".concat("desc"===o&&"hidden")}),(0,r.jsx)(d.S9U,{className:"".concat("asc"===o&&"hidden")})]})]})},t)})})}),(0,r.jsx)("tbody",{className:"divide-y divide-gray-100 border-t border-gray-100 ",children:e.dataTable&&e.dataTable.map((a,t)=>{let{id:l}=a;return(0,r.jsxs)("tr",{className:"".concat(e.rowClick&&"cursor-pointer hover:bg-green/[0.2]"),onClick:()=>handleRow(a),children:[(0,r.jsx)("td",{className:"px-6 py-4 rounded-l-xl",children:showNo(t)}),e.tableBodies.map((l,s)=>(0,r.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:services_getProperty(a,l,t,e.setIndexBox)},s)),(0,r.jsx)("td",{className:"px-6 py-4 rounded-r-xl",children:(0,r.jsxs)("div",{className:"flex flex-row gap-2",children:[e.costume&&e.costume(a),e.ubah&&(0,r.jsx)(d.Ph1,{onClick:()=>e.setEdit&&(null==e?void 0:e.setEdit(a)),size:20,className:"cursor-pointer hover:text-yellow-500",title:"Ubah"}),e.hapus&&(0,r.jsx)(d.AuQ,{onClick:()=>(null==e?void 0:e.setDelete)&&(null==e?void 0:e.setDelete({id:l,isDelete:!1})),size:20,className:"cursor-pointer hover:text-red-700",title:"Hapus"})]})})]},t)})})]})}},8875:function(e,a,t){"use strict";t.d(a,{I8:function(){return s},Sj:function(){return n},_n:function(){return l},hi:function(){return i}});var r=t(2173);let l="https://perpus.thina.my.id",s=r.Z.create({baseURL:"".concat(l,"/auth")}),n=r.Z.create({baseURL:"".concat(l,"/crud")}),i=r.Z.create({baseURL:"".concat(l,"/api")});r.Z.create({baseURL:"".concat(l,"/storage")})},6446:function(e,a,t){"use strict";var r=t(4660),l=t(4810),s=t(8875);let n=(0,r.Ue)((0,l.mW)((e,a)=>({dtKatalog:[],setKatalog:async a=>{let{page:t=1,limit:r=10,orderBy:l,sort:n,search:i}=a;try{let a=await (0,s.hi)({method:"get",url:"/katalog",params:{limit:r,page:t,orderBy:l,sort:n,search:i}});return e(e=>({...e,dtKatalog:a.data})),{status:"berhasil",data:a.data}}catch(e){return{status:"error",error:e.response.data}}},setKatalogAll:async a=>{let{search:t}=a;try{let a=await (0,s.hi)({method:"get",url:"/katalog/all",params:{search:t}});return e(e=>({...e,dtKatalog:a.data})),{status:"berhasil",data:a.data}}catch(e){return{status:"error",error:e.response.data}}},setKatalogReady:async a=>{let{search:t,jenis:r}=a;try{let a=await (0,s.hi)({method:"get",url:"/katalog/ready",params:{search:t,jenis:r}});return e(e=>({...e,dtKatalog:a.data})),{status:"berhasil",data:a.data}}catch(e){return{status:"error",error:e.response.data}}},setKatalogDetail:async a=>{try{let t=await (0,s.hi)({method:"get",url:"/katalog/detail/".concat(a)});return e(e=>{var a;return{...e,dtKatalog:null===(a=t.data)||void 0===a?void 0:a.data}}),{status:"berhasil",data:t.data}}catch(e){return{status:"error",error:e.response.data}}},setLapKatalog:async a=>{let{jenis:t,tahun:r}=a;try{let a=await (0,s.hi)({method:"get",url:"/katalog/laporan",params:{jenis:t,tahun:r}});return e(e=>({...e,dtKatalog:a.data})),{status:"berhasil",data:a.data}}catch(e){return{status:"error",error:e.response.data}}}})));a.Z=n}},function(e){e.O(0,[8447,6990,5580,4758,5166,4,8672,2971,2472,1744],function(){return e(e.s=4065)}),_N_E=e.O()}]);